<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/main.css">
    <title>AnimeVerse</title>
</head>
<body>
<nav class="navbar">
    <ul class="menu">
        <li><a href="#">–ì–ª–∞–≤–Ω–∞—è</a></li>
    </ul>
    <form class="search" onsubmit="return false;">
        <input type="text" placeholder="–ü–æ–∏—Å–∫...">
        <button type="submit">üîç</button>
    </form>
</nav>

<section class="top_anime">
    <h2 class="section-title">–¢–æ–ø –ê–Ω–∏–º–µ</h2>
    <div id="anime-container" class="anime-grid">
        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
</section>

<section class="top_manga">
</section>

<script>
    const API_URL = 'https://api.jikan.moe/v4/top/anime?limit=25';
    const container = document.getElementById('anime-container');

    async function fetchTopAnime() {
        try {
            const response = await fetch(API_URL);

            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');
            }

            const data = await response.json();
            displayAnime(data.data);
        } catch (error) {
            container.innerHTML = `<div class="error">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–Ω–∏–º–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</div>`;
            console.error('Error:', error);
        }
    }

    function displayAnime(animeList) {
        container.innerHTML = '';

        animeList.forEach(anime => {
            const card = document.createElement('div');
            card.className = 'anime-card';

            card.innerHTML = `
                <img src="${anime.images.jpg.large_image_url}" alt="${anime.title}">
                <div class="anime-info">
                    <div class="anime-title">${anime.title}</div>
                    <div class="anime-meta">
                        <span>${anime.type || 'N/A'}</span>
                        <span class="anime-score">‚≠ê ${anime.score || 'N/A'}</span>
                    </div>
                </div>
            `;

            card.addEventListener('click', () => {
                window.open(anime.url, '_blank');
            });

            container.appendChild(card);
        });
    }

    fetchTopAnime();
</script>
</body>
</html>